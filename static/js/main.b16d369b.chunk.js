(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{26:function(e,t,a){e.exports=a(41)},31:function(e,t,a){},32:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(22),l=a.n(r),s=(a(31),a(32),a(23)),d=a(8),u=a(5),o=a(10),h=a(13),f=a(14),c=a(4),m=a(16),v=a(15),g=a(6),p=a.n(g),E=a(12),y=a.n(E),b=(a(34),function(e){return i.a.createElement("div",{id:"header"},i.a.createElement("span",{id:"time"},(Math.floor((Date.now()-(e.startTime||Date.now()))/1e3)+"").padStart(3,"0")),i.a.createElement("button",{onClick:e.reset}),i.a.createElement("span",{id:"mines-left"},(e.minesLeft<0?"-":"")+(Math.abs(e.minesLeft)+"").padStart(e.minesLeft<0?2:3,"0")))}),k=function(e){return i.a.createElement("div",{className:y()("tile",{hidden:e.hidden,flagged:1===e.flag,unsure:2===e.flag,zero:!e.hidden&&0===e.value,one:!e.hidden&&1===e.value,two:!e.hidden&&2===e.value,three:!e.hidden&&3===e.value,four:!e.hidden&&4===e.value,five:!e.hidden&&5===e.value,six:!e.hidden&&6===e.value,seven:!e.hidden&&7===e.value,eight:!e.hidden&&8===e.value,bomb:(!e.hidden||e.gameEnded)&&-1===e.value}),onClick:e.onClick,onContextMenu:e.onContextMenu},e.hidden||i.a.createElement("span",null,e.value))},w=function(e){Object(m.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(c.a)(n)),n.handleRightClick=n.handleRightClick.bind(Object(c.a)(n)),n.startNewGame=n.startNewGame.bind(Object(c.a)(n)),n.state={width:25,height:30,mines:70,startTime:0,gameEnded:!1},n.startNewGame(!0),n}return Object(f.a)(a,[{key:"generateField",value:function(e,t,a,n,i){for(var r=function(e){return Math.floor(Math.random()*e)},l=Array.from({length:t},(function(){return Array.from({length:e},(function(){return{value:0,hidden:!0,flag:0}}))})),s=a;s>0;){var d=r(e),u=r(t);-1!==l[u][d].value&&(d===n&&u===i||(l[u][d].value=-1,s--))}for(var o=0;o<e;o++)for(var h=0;h<t;h++)if(-1===l[h][o].value)for(var f=Math.max(o-1,0);f<Math.min(o+2,e);f++)for(var c=Math.max(h-1,0);c<Math.min(h+2,t);c++)-1!==l[c][f].value&&l[c][f].value++;return l}},{key:"startNewGame",value:function(e){this.stopGame();var t=this.state,a=t.width,n=t.height;document.documentElement.style.setProperty("--field-width",a),document.documentElement.style.setProperty("--field-height",n);var i={started:!1,gameEnded:!1,field:Array.from({length:n},(function(){return Array.from({length:a},(function(){return{value:0,hidden:!0,flag:0}}))})),startTime:0};e?this.state=Object.assign(this.state,i):this.setState(i)}},{key:"getFieldsToReveal",value:function(e,t,a,n){if((a[t]||[]).includes(e))return a;var i=n[t][e];if(!i.hidden||1===i.flag)return a;if(Array.isArray(a[t])?a[t].push(e):a[t]=[e],0===i.value)for(var r=Math.max(e-1,0);r<Math.min(e+2,this.state.width);r++)for(var l=Math.max(t-1,0);l<Math.min(t+2,this.state.height);l++)a=this.getFieldsToReveal(r,l,a,n);return a}},{key:"handleClick",value:function(e,t){var a=this;if(!this.state.gameEnded)if(this.state.started){if(1!==this.state.field[t][e].flag){if(-1===this.state.field[t][e].value)this.setState({field:p()(this.state.field,Object(u.a)({},t,Object(u.a)({},e,{hidden:{$set:!1}}))),gameEnded:!0},(function(){return a.stopGame(!1)}));else{var n=this.getFieldsToReveal(e,t,[],this.state.field),i={};Object.entries(n).forEach((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];i[a]={},n.forEach((function(e){return i[a][e]={hidden:{$set:!1},flag:{$set:0}}}))})),this.setState({field:p()(this.state.field,i)},(function(){0===a.state.field.flatMap((function(e){return e.filter((function(e){return-1!==e.value||!e.hidden}))})).length&&(a.setState({gameEnded:!0}),a.stopGame(!0))}))}}}else{var r=this.state,l=r.width,s=r.height,d=r.mines,h=this.generateField(l,s,d,e,t),f=this.getFieldsToReveal(e,t,[],h),c={};Object.entries(f).forEach((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];c[a]={},n.forEach((function(e){return c[a][e]={hidden:{$set:!1}}}))})),this.state.field.forEach((function(e,t){return e.forEach((function(e,a){0!==e.flag&&(Array.isArray(c[t])||(c[t]=[]),"object"===typeof c[t][a]?c[t][a].flag={$set:e.flag}:c[t][a]={flag:{$set:e.flag}})}))})),this.setState({started:!0,field:p()(h,c),startTime:Date.now()}),this.updateInterval=setInterval((function(){return a.forceUpdate()}),1e3)}}},{key:"handleRightClick",value:function(e,t,a){e.preventDefault(),this.state.gameEnded||this.state.field[a][t].hidden&&this.setState({field:p()(this.state.field,Object(u.a)({},a,Object(u.a)({},t,{flag:{$apply:function(e){return(e+1)%3}}})))})}},{key:"stopGame",value:function(e){clearInterval(this.updateInterval),void 0!==e&&console.log(e)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"minesweeper"},i.a.createElement(b,{startTime:this.state.startTime,minesLeft:this.state.mines-this.state.field.flatMap((function(e){return e.filter((function(e){return 1===e.flag}))})).length,reset:function(){return e.startNewGame()}}),i.a.createElement("div",{id:"game"},this.state.field.flatMap((function(t,a){return t.map((function(t,n){return i.a.createElement(k,{value:t.value,hidden:t.hidden,flag:t.flag,gameEnded:e.state.gameEnded,onClick:function(){return e.handleClick(n,a)},onContextMenu:function(t){return e.handleRightClick(t,n,a)}})}))}))))}}]),a}(n.Component),x=(a(35),function(e){return i.a.createElement("div",{id:"header"},i.a.createElement("span",{id:"time"},(Math.floor((Date.now()-(e.startTime||Date.now()))/1e3)+"").padStart(3,"0")),i.a.createElement("button",{onClick:e.reset}),i.a.createElement("span",{id:"mines-left"},(e.minesLeft<0?"-":"")+(Math.abs(e.minesLeft)+"").padStart(e.minesLeft<0?2:3,"0")))}),C=function(e){return i.a.createElement("div",{className:y()("tile",{hidden:e.hidden,flagged:1===e.flag,unsure:2===e.flag,zero:!e.hidden&&0===e.value,one:!e.hidden&&1===e.value,two:!e.hidden&&2===e.value,three:!e.hidden&&3===e.value,four:!e.hidden&&4===e.value,five:!e.hidden&&5===e.value,six:!e.hidden&&6===e.value,seven:!e.hidden&&7===e.value,eight:!e.hidden&&8===e.value,bomb:(!e.hidden||e.gameEnded)&&-1===e.value}),onClick:e.onClick,onContextMenu:e.onContextMenu},e.hidden||i.a.createElement("span",null,e.value))},j=function(e){Object(m.a)(a,e);var t=Object(v.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(c.a)(n)),n.handleRightClick=n.handleRightClick.bind(Object(c.a)(n)),n.startNewGame=n.startNewGame.bind(Object(c.a)(n)),n.state={width:25,height:30,mines:70,startTime:0,gameEnded:!1,hex:!0},n.startNewGame(!0),n}return Object(f.a)(a,[{key:"getSurroundingCoordinates",value:function(e,t,a,n,i){var r=[];if(i){var l=0===(1&t)?-1:1;r.push({x:e+1,y:t},{x:e-1,y:t},{x:e,y:t+1},{x:e,y:t-1},{x:e+l,y:t+1},{x:e+l,y:t-1})}else r.push({x:e-1,y:t-1},{x:e-1,y:t},{x:e-1,y:t+1},{x:e,y:t-1},{x:e,y:t+1},{x:e+1,y:t-1},{x:t+1,y:t},{x:e+1,y:t+1});return r.filter((function(e){return e.x>=0&&e.y>=0&&e.x<a&&e.y<n}))}},{key:"generateField",value:function(e,t,a,n,i){for(var r=function(e){return Math.floor(Math.random()*e)},l=Array.from({length:t},(function(){return Array.from({length:e},(function(){return{value:0,hidden:!0,flag:0}}))})),s=a;s>0;){var d=r(e),u=r(t);-1!==l[u][d].value&&(d===n&&u===i||(l[u][d].value=-1,s--))}for(var o=0;o<e;o++)for(var h=0;h<t;h++)-1===l[h][o].value&&this.getSurroundingCoordinates(o,h,e,t,this.state.hex).forEach((function(e){var t=e.x,a=e.y;-1!==l[a][t].value&&l[a][t].value++}));return l}},{key:"startNewGame",value:function(e){this.stopGame();var t=this.state,a=t.width,n=t.height;document.documentElement.style.setProperty("--field-width",a),document.documentElement.style.setProperty("--field-height",n);var i={started:!1,gameEnded:!1,field:Array.from({length:n},(function(){return Array.from({length:a},(function(){return{value:0,hidden:!0,flag:0}}))})),startTime:0};e?this.state=Object.assign(this.state,i):this.setState(i)}},{key:"getFieldsToReveal",value:function(e,t,a,n){var i=this;if((a[t]||[]).includes(e))return a;var r=n[t][e];return r.hidden&&1!==r.flag?(Array.isArray(a[t])?a[t].push(e):a[t]=[e],0===r.value&&this.getSurroundingCoordinates(e,t,this.state.width,this.state.height,this.state.hex).forEach((function(e){a=i.getFieldsToReveal(e.x,e.y,a,n)})),a):a}},{key:"handleClick",value:function(e,t){var a=this;if(!this.state.gameEnded)if(this.state.started){if(1!==this.state.field[t][e].flag){if(-1===this.state.field[t][e].value)this.setState({field:p()(this.state.field,Object(u.a)({},t,Object(u.a)({},e,{hidden:{$set:!1}}))),gameEnded:!0},(function(){return a.stopGame(!1)}));else{var n=this.getFieldsToReveal(e,t,[],this.state.field),i={};Object.entries(n).forEach((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];i[a]={},n.forEach((function(e){return i[a][e]={hidden:{$set:!1},flag:{$set:0}}}))})),this.setState({field:p()(this.state.field,i)},(function(){0===a.state.field.flatMap((function(e){return e.filter((function(e){return-1!==e.value||!e.hidden}))})).length&&(a.setState({gameEnded:!0}),a.stopGame(!0))}))}}}else{var r=this.state,l=r.width,s=r.height,d=r.mines,h=this.generateField(l,s,d,e,t),f=this.getFieldsToReveal(e,t,[],h),c={};Object.entries(f).forEach((function(e){var t=Object(o.a)(e,2),a=t[0],n=t[1];c[a]={},n.forEach((function(e){return c[a][e]={hidden:{$set:!1}}}))})),this.state.field.forEach((function(e,t){return e.forEach((function(e,a){0!==e.flag&&(Array.isArray(c[t])||(c[t]=[]),"object"===typeof c[t][a]?c[t][a].flag={$set:e.flag}:c[t][a]={flag:{$set:e.flag}})}))})),this.setState({started:!0,field:p()(h,c),startTime:Date.now()}),this.updateInterval=setInterval((function(){return a.forceUpdate()}),1e3)}}},{key:"handleRightClick",value:function(e,t,a){e.preventDefault(),this.state.gameEnded||this.state.field[a][t].hidden&&this.setState({field:p()(this.state.field,Object(u.a)({},a,Object(u.a)({},t,{flag:{$apply:function(e){return(e+1)%3}}})))})}},{key:"stopGame",value:function(e){clearInterval(this.updateInterval),void 0!==e&&console.log(e)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"minesweeperhex",className:y()({hex:this.state.hex})},i.a.createElement(x,{startTime:this.state.startTime,minesLeft:this.state.mines-this.state.field.flatMap((function(e){return e.filter((function(e){return 1===e.flag}))})).length,reset:function(){return e.startNewGame()}}),i.a.createElement("div",{id:"game"},this.state.field.map((function(t,a){return i.a.createElement("div",{className:"row"},t.map((function(t,n){return i.a.createElement(C,{value:t.value,hidden:t.hidden,flag:t.flag,gameEnded:e.state.gameEnded,onClick:function(){return e.handleClick(n,a)},onContextMenu:function(t){return e.handleRightClick(t,n,a)}})})))}))))}}]),a}(n.Component);var O=function(){return i.a.createElement("div",null,i.a.createElement(s.a,null,i.a.createElement(d.a,{path:"/minesweeper",component:w}),i.a.createElement(d.a,{path:"/minesweeperhex",component:j})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.b16d369b.chunk.js.map