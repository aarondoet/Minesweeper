(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{12:function(e,t,a){e.exports=a(21)},17:function(e,t,a){},18:function(e,t,a){},20:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(7),s=a.n(r),l=(a(17),a(18),a(3)),h=a(5),o=a(8),u=a(9),d=a(2),c=a(11),f=a(10),m=a(1),v=a.n(m),g=a(4),E=a.n(g),y=(a(20),function(e){return i.a.createElement("div",{id:"header"},i.a.createElement("span",{id:"time"},(Math.floor((Date.now()-(e.startTime||Date.now()))/1e3)+"").padStart(3,"0")),i.a.createElement("button",{onClick:e.reset},"Reset"),i.a.createElement("span",{id:"mines-left"},(e.minesLeft<0?"-":"")+(Math.abs(e.minesLeft)+"").padStart(e.minesLeft<0?2:3,"0")))}),p=function(e){return i.a.createElement("div",{className:E()("tile",{hidden:e.hidden,flagged:1===e.flag,unsure:2===e.flag,zero:!e.hidden&&0===e.value,one:!e.hidden&&1===e.value,two:!e.hidden&&2===e.value,three:!e.hidden&&3===e.value,four:!e.hidden&&4===e.value,five:!e.hidden&&5===e.value,six:!e.hidden&&6===e.value,seven:!e.hidden&&7===e.value,eight:!e.hidden&&8===e.value,bomb:(!e.hidden||e.gameEnded)&&-1===e.value}),onClick:e.onClick,onContextMenu:e.onContextMenu},e.hidden||i.a.createElement("span",null,e.value))},x=function(e){Object(c.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(d.a)(n)),n.handleRightClick=n.handleRightClick.bind(Object(d.a)(n)),n.startNewGame=n.startNewGame.bind(Object(d.a)(n)),n.state={width:25,height:30,mines:70,startTime:0,gameEnded:!1,hex:!1},n.startNewGame(n.state.width,n.state.height,n.state.mines,n.state.hex,!0),n}return Object(u.a)(a,[{key:"getSurroundingCoordinates",value:function(e,t,a,n,i){var r=[];if(i){var s=0===(1&t)?-1:1;r.push({x:e+1,y:t},{x:e-1,y:t},{x:e,y:t+1},{x:e,y:t-1},{x:e+s,y:t+1},{x:e+s,y:t-1})}else r.push({x:e-1,y:t-1},{x:e-1,y:t},{x:e-1,y:t+1},{x:e,y:t-1},{x:e,y:t+1},{x:e+1,y:t-1},{x:e+1,y:t},{x:e+1,y:t+1});return r.filter((function(e){return e.x>=0&&e.y>=0&&e.x<a&&e.y<n}))}},{key:"generateField",value:function(e,t,a,n,i){for(var r=function(e){return Math.floor(Math.random()*e)},s=Array.from({length:t},(function(){return Array.from({length:e},(function(){return{value:0,hidden:!0,flag:0}}))})),l=a;l>0;){var h=r(e),o=r(t);-1!==s[o][h].value&&(h===n&&o===i||(s[o][h].value=-1,l--))}for(var u=0;u<e;u++)for(var d=0;d<t;d++)-1===s[d][u].value&&this.getSurroundingCoordinates(u,d,e,t,this.state.hex).forEach((function(e){var t=e.x,a=e.y;-1!==s[a][t].value&&s[a][t].value++}));return s}},{key:"startNewGame",value:function(e,t,a,n,i){this.stopGame(),document.documentElement.style.setProperty("--field-width",e),document.documentElement.style.setProperty("--field-height",t);var r={width:e,height:t,mines:a,started:!1,gameEnded:!1,field:Array.from({length:t},(function(){return Array.from({length:e},(function(){return{value:0,hidden:!0,flag:0}}))})),startTime:0,hex:n};i?this.state=Object.assign(this.state,r):this.setState(r)}},{key:"getFieldsToReveal",value:function(e,t,a,n){var i=this;if((a[t]||[]).includes(e))return a;var r=n[t][e];return r.hidden&&1!==r.flag?(Array.isArray(a[t])?a[t].push(e):a[t]=[e],0===r.value&&this.getSurroundingCoordinates(e,t,this.state.width,this.state.height,this.state.hex).forEach((function(e){a=i.getFieldsToReveal(e.x,e.y,a,n)})),a):a}},{key:"handleClick",value:function(e,t){var a=this;if(!this.state.gameEnded)if(this.state.started){if(1!==this.state.field[t][e].flag){if(-1===this.state.field[t][e].value)this.setState({field:v()(this.state.field,Object(l.a)({},t,Object(l.a)({},e,{hidden:{$set:!1}}))),gameEnded:!0},(function(){return a.stopGame(!1)}));else{var n=this.getFieldsToReveal(e,t,[],this.state.field),i={};Object.entries(n).forEach((function(e){var t=Object(h.a)(e,2),a=t[0],n=t[1];i[a]={},n.forEach((function(e){return i[a][e]={hidden:{$set:!1},flag:{$set:0}}}))})),this.setState({field:v()(this.state.field,i)},(function(){if(0===a.state.field.flatMap((function(e){return e.filter((function(e){return-1!==e.value&&e.hidden}))})).length){var e={};a.state.field.forEach((function(t,a){e[a]={},t.forEach((function(t,n){-1===t.value&&(e[a][n]={flag:{$set:1}})}))})),a.setState({gameEnded:!0,field:v()(a.state.field,e)}),a.stopGame(!0)}}))}}}else{var r=this.state,s=r.width,o=r.height,u=r.mines,d=this.generateField(s,o,u,e,t),c=this.getFieldsToReveal(e,t,[],d),f={};Object.entries(c).forEach((function(e){var t=Object(h.a)(e,2),a=t[0],n=t[1];f[a]={},n.forEach((function(e){return f[a][e]={hidden:{$set:!1}}}))})),this.state.field.forEach((function(e,t){return e.forEach((function(e,a){0!==e.flag&&(Array.isArray(f[t])||(f[t]=[]),"object"===typeof f[t][a]?f[t][a].flag={$set:e.flag}:f[t][a]={flag:{$set:e.flag}})}))})),this.setState({started:!0,field:v()(d,f),startTime:Date.now()},(function(){if(0===a.state.field.flatMap((function(e){return e.filter((function(e){return-1!==e.value&&e.hidden}))})).length){var e={};a.state.field.forEach((function(t,a){e[a]={},t.forEach((function(t,n){-1===t.value&&(e[a][n]={flag:{$set:1}})}))})),a.setState({gameEnded:!0,field:v()(a.state.field,e)}),a.stopGame(!0)}})),this.updateInterval=setInterval((function(){return a.forceUpdate()}),1e3)}}},{key:"handleRightClick",value:function(e,t,a){e.preventDefault(),this.state.gameEnded||this.state.field[a][t].hidden&&this.setState({field:v()(this.state.field,Object(l.a)({},a,Object(l.a)({},t,{flag:{$apply:function(e){return(e+1)%3}}})))})}},{key:"stopGame",value:function(e){clearInterval(this.updateInterval),void 0!==e&&console.log(e)}},{key:"render",value:function(){var e=this,t=function(e,t,a){return Math.max(Math.min(a,t),e)};return i.a.createElement("div",{id:"minesweeperhex"},i.a.createElement("div",{id:"menu"},i.a.createElement("input",{id:"hex-selector",type:"checkbox",checked:this.state.hex,onChange:function(t){var a=t.target.checked;return e.startNewGame(e.state.width,e.state.height,e.state.mines,a,!1)}}),i.a.createElement("label",{htmlFor:"hex-selector"},"Hex"),i.a.createElement("label",{htmlFor:"width-selector"},"Width:"),i.a.createElement("input",{id:"width-selector",type:"number",min:"5",max:"100",value:this.state.width,onChange:function(a){var n=a.target.value;return e.startNewGame(t(5,n,100),e.state.height,e.state.mines,e.state.hex,!1)}}),i.a.createElement("label",{htmlFor:"height-selector"},"Height:"),i.a.createElement("input",{id:"height-selector",type:"number",min:"5",max:"100",value:this.state.height,onChange:function(a){var n=a.target.value;return e.startNewGame(e.state.width,t(5,n,100),e.state.mines,e.state.hex,!1)}}),i.a.createElement("label",{htmlFor:"mine-selector"},"Mines:"),i.a.createElement("input",{id:"mine-selector",type:"number",min:"1",max:this.state.width*this.state.height-1,value:this.state.mines,onChange:function(a){var n=a.target.value;return e.startNewGame(e.state.width,e.state.height,t(1,n,e.state.width*e.state.height-1),e.state.hex,!1)}})),i.a.createElement(y,{startTime:this.state.startTime,minesLeft:this.state.mines-this.state.field.flatMap((function(e){return e.filter((function(e){return 1===e.flag}))})).length,reset:function(){return e.startNewGame(e.state.width,e.state.height,e.state.mines,e.state.hex,!1)}}),i.a.createElement("div",{id:"game",className:E()({hex:this.state.hex})},this.state.field.map((function(t,a){return i.a.createElement("div",{className:"row"},t.map((function(t,n){return i.a.createElement(p,{value:t.value,hidden:t.hidden,flag:t.flag,gameEnded:e.state.gameEnded,onClick:function(){return e.handleClick(n,a)},onContextMenu:function(t){return e.handleRightClick(t,n,a)}})})))}))))}}]),a}(n.Component);var w=function(){return i.a.createElement("div",null,i.a.createElement(x,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.024a3abc.chunk.js.map