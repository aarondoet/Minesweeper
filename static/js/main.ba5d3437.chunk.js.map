{"version":3,"sources":["Minesweeper.js","App.js","serviceWorker.js","index.js"],"names":["Header","props","id","Math","floor","Date","now","startTime","padStart","onClick","reset","minesLeft","abs","Tile","className","classNames","hidden","flag","value","gameEnded","onContextMenu","Minesweeper","handleClick","bind","handleRightClick","startNewGame","state","width","height","mines","hex","x","y","coords","offset","push","filter","coord","clickX","clickY","randomNumber","max","random","field","Array","from","length","i","j","this","getSurroundingCoordinates","forEach","initial","stopGame","document","documentElement","style","setProperty","started","Object","assign","setState","toReveal","includes","tile","isArray","pos","getFieldsToReveal","update","$set","updater","entries","xs","flatMap","column","generateField","updateInterval","setInterval","forceUpdate","e","preventDefault","$apply","val","won","clearInterval","undefined","console","log","clamp","min","type","checked","onChange","target","htmlFor","map","Component","App","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","message"],"mappings":"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","file":"static/js/main.ba5d3437.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport update from \"immutability-helper\";\nimport classNames from \"classnames\";\nimport \"./minesweeper.scss\";\n\nconst Header = props => (\n\t<div id=\"header\">\n\t\t<span id=\"time\">{(Math.floor((Date.now() - (props.startTime || Date.now())) / 1000) + \"\").padStart(3, \"0\")}</span>\n\t\t<button onClick={props.reset}>Reset</button>\n\t\t<span id=\"mines-left\">{(props.minesLeft < 0 ? \"-\" : \"\") + (Math.abs(props.minesLeft) + \"\").padStart(props.minesLeft < 0 ? 2 : 3, \"0\")}</span>\n\t</div>\n);\n\nconst Tile = props => (\n\t<div className={classNames(\"tile\", {\n\t\t\"hidden\": props.hidden,\n\t\t\"flagged\": props.flag === 1,\n\t\t\"unsure\": props.flag === 2,\n\t\t\"zero\": !props.hidden && props.value === 0,\n\t\t\"one\": !props.hidden && props.value === 1,\n\t\t\"two\": !props.hidden && props.value === 2,\n\t\t\"three\": !props.hidden && props.value === 3,\n\t\t\"four\": !props.hidden && props.value === 4,\n\t\t\"five\": !props.hidden && props.value === 5,\n\t\t\"six\": !props.hidden && props.value === 6,\n\t\t\"seven\": !props.hidden && props.value === 7,\n\t\t\"eight\": !props.hidden && props.value === 8,\n\t\t\"bomb\": (!props.hidden || props.gameEnded) && props.value === -1\n\t})} onClick={props.onClick} onContextMenu={props.onContextMenu}>\n\t\t{props.hidden || <span>{props.value}</span>}\n\t</div>\n);\n\nexport default class Minesweeper extends Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.handleClick = this.handleClick.bind(this);\n\t\tthis.handleRightClick = this.handleRightClick.bind(this);\n\t\tthis.startNewGame = this.startNewGame.bind(this);\n\t\tthis.state = {\n\t\t\twidth: 25,\n\t\t\theight: 30,\n\t\t\tmines: 70,\n\t\t\tstartTime: 0,\n\t\t\tgameEnded: false,\n\t\t\thex: false\n\t\t};\n\t\tthis.startNewGame(this.state.width, this.state.height, this.state.mines, this.state.hex, true);\n\t}\n\tgetSurroundingCoordinates(x, y, width, height, hex){\n\t\tconst coords = [];\n\t\tif(hex){\n\t\t\tconst offset = (y & 1) === 0 ? -1 : 1;\n\t\t\tcoords.push({x: x+1, y}, {x: x-1, y}, {x, y: y+1}, {x, y: y-1}, {x: x+offset, y: y+1}, {x: x+offset, y: y-1});\n\t\t}else{\n\t\t\tcoords.push({x: x-1, y: y-1}, {x: x-1, y}, {x: x-1, y: y+1}, {x, y: y-1}, {x, y: y+1}, {x: x+1, y: y-1}, {x: x+1, y}, {x: x+1, y: y+1});\n\t\t}\n\t\treturn coords.filter(coord => coord.x >= 0 && coord.y >= 0 && coord.x < width && coord.y < height);\n\t}\n\tgenerateField(width, height, mines, clickX, clickY){\n\t\tconst randomNumber = max => Math.floor(Math.random() * max);\n\t\tlet field = Array.from({length: height}, () => Array.from({length: width}, () => ({value: 0, hidden: true, flag: 0})));\n\t\tlet minesLeft = mines;\n\t\twhile(minesLeft > 0){\n\t\t\tconst x = randomNumber(width);\n\t\t\tconst y = randomNumber(height);\n\t\t\tif(field[y][x].value === -1) continue;\n\t\t\tif(x === clickX && y === clickY) continue;\n\t\t\tfield[y][x].value = -1;\n\t\t\tminesLeft--;\n\t\t}\n\t\tfor(let i = 0; i < width; i++){\n\t\t\tfor(let j = 0; j < height; j++){\n\t\t\t\tif(field[j][i].value === -1){\n\t\t\t\t\tthis.getSurroundingCoordinates(i, j, width, height, this.state.hex).forEach(({x, y}) => {\n\t\t\t\t\t\tif(field[y][x].value !== -1) field[y][x].value++;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn field;\n\t}\n\tstartNewGame(width, height, mines, hex, initial){\n\t\tthis.stopGame();\n\t\tdocument.documentElement.style.setProperty(\"--field-width\", width);\n\t\tdocument.documentElement.style.setProperty(\"--field-height\", height);\n\t\tlet state = {\n\t\t\twidth,\n\t\t\theight,\n\t\t\tmines,\n\t\t\tstarted: false,\n\t\t\tgameEnded: false,\n\t\t\tfield: Array.from({length: height}, () => Array.from({length: width}, () => ({value: 0, hidden: true, flag: 0}))),\n\t\t\tstartTime: 0,\n\t\t\thex\n\t\t};\n\t\tif(initial) this.state = Object.assign(this.state, state);\n\t\telse this.setState(state);\n\t}\n\tgetFieldsToReveal(x, y, toReveal, field){\n\t\tif((toReveal[y] || []).includes(x)) return toReveal;\n\t\tlet tile = field[y][x];\n\t\tif(!tile.hidden || tile.flag === 1) return toReveal;\n\t\tif(Array.isArray(toReveal[y])) toReveal[y].push(x);\n\t\telse toReveal[y] = [x];\n\t\tif(tile.value === 0){\n\t\t\tthis.getSurroundingCoordinates(x, y, this.state.width, this.state.height, this.state.hex).forEach(pos => {\n\t\t\t\ttoReveal = this.getFieldsToReveal(pos.x, pos.y, toReveal, field);\n\t\t\t});\n\t\t}\n\t\treturn toReveal;\n\t}\n\thandleClick(x, y){\n\t\tif(this.state.gameEnded) return;\n\t\tif(!this.state.started){\n\t\t\tconst {width, height, mines} = this.state;\n\t\t\tconst field = this.generateField(width, height, mines, x, y);\n\t\t\tlet toReveal = this.getFieldsToReveal(x, y, [], field);\n\t\t\tlet updater = {};\n\t\t\tObject.entries(toReveal).forEach(([y, xs]) => {\n\t\t\t\tupdater[y] = {};\n\t\t\t\txs.forEach(x => updater[y][x] = {hidden: {$set: false}});\n\t\t\t});\n\t\t\tthis.state.field.forEach((column, y) => column.forEach((tile, x) => {\n\t\t\t\tif(tile.flag === 0) return;\n\t\t\t\tif(!Array.isArray(updater[y])) updater[y] = [];\n\t\t\t\tif(typeof updater[y][x] === \"object\") updater[y][x].flag = {$set: tile.flag};\n\t\t\t\telse updater[y][x] = {flag: {$set: tile.flag}};\n\t\t\t}));\n\t\t\tthis.setState({\n\t\t\t\tstarted: true,\n\t\t\t\tfield: update(field, updater),\n\t\t\t\tstartTime: Date.now()\n\t\t\t}, () => {\n\t\t\t\tif(this.state.field.flatMap(column => column.filter(tile => tile.value !== -1 && tile.hidden)).length === 0){\n\t\t\t\t\tconst updater = {};\n\t\t\t\t\tthis.state.field.forEach((column, j) => {\n\t\t\t\t\t\tupdater[j] = {};\n\t\t\t\t\t\tcolumn.forEach((tile, i) => {\n\t\t\t\t\t\t\tif(tile.value === -1) updater[j][i] = {flag: {$set: 1}};\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t\tthis.setState({gameEnded: true, field: update(this.state.field, updater)});\n\t\t\t\t\tthis.stopGame(true);\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.updateInterval = setInterval(()=>this.forceUpdate(), 1000);\n\t\t}else if(this.state.field[y][x].flag !== 1){\n\t\t\tconst tile = this.state.field[y][x];\n\t\t\tif(tile.value === -1){\n\t\t\t\tthis.setState({\n\t\t\t\t\tfield: update(this.state.field, {[y]: {[x]: {hidden: {$set: false}}}}),\n\t\t\t\t\tgameEnded: true\n\t\t\t\t}, () => this.stopGame(false))\n\t\t\t}else{\n\t\t\t\tlet toReveal = this.getFieldsToReveal(x, y, [], this.state.field);\n\t\t\t\tlet updater = {};\n\t\t\t\tObject.entries(toReveal).forEach(([y, xs]) => {\n\t\t\t\t\tupdater[y] = {};\n\t\t\t\t\txs.forEach(x => updater[y][x] = {hidden: {$set: false}, flag: {$set: 0}});\n\t\t\t\t});\n\t\t\t\tthis.setState({\n\t\t\t\t\tfield: update(this.state.field, updater)\n\t\t\t\t}, () => {\n\t\t\t\t\tif(this.state.field.flatMap(column => column.filter(tile => tile.value !== -1 && tile.hidden)).length === 0){\n\t\t\t\t\t\tconst updater = {};\n\t\t\t\t\t\tthis.state.field.forEach((column, j) => {\n\t\t\t\t\t\t\tupdater[j] = {};\n\t\t\t\t\t\t\tcolumn.forEach((tile, i) => {\n\t\t\t\t\t\t\t\tif(tile.value === -1) updater[j][i] = {flag: {$set: 1}};\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.setState({gameEnded: true, field: update(this.state.field, updater)});\n\t\t\t\t\t\tthis.stopGame(true);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\thandleRightClick(e, x, y){\n\t\te.preventDefault();\n\t\tif(this.state.gameEnded) return;\n\t\tif(this.state.field[y][x].hidden){\n\t\t\tthis.setState({\n\t\t\t\tfield: update(this.state.field, {[y]: {[x]: {flag: {$apply: val => (val+1)%3}}}})\n\t\t\t});\n\t\t}\n\t}\n\tstopGame(won){\n\t\tclearInterval(this.updateInterval);\n\t\tif(won === undefined) return;\n\t\tconsole.log(won)\n\t}\n\trender() {\n\t\tconst clamp = (min, val, max) => Math.max(Math.min(max, val), min);\n\t\treturn (\n\t\t\t<div id=\"minesweeperhex\">\n\t\t\t\t<div id=\"menu\">\n\t\t\t\t\t<input id=\"hex-selector\" type=\"checkbox\" checked={this.state.hex} onChange={({target:{checked}}) => this.startNewGame(this.state.width, this.state.height, this.state.mines, checked, false)} /><label htmlFor=\"hex-selector\">Hex</label>\n\t\t\t\t\t<label htmlFor=\"width-selector\">Width:</label><input id=\"width-selector\" type=\"number\" min=\"5\" max=\"100\" value={this.state.width} onChange={({target:{value}}) => this.startNewGame(clamp(5, value, 100), this.state.height, this.state.mines, this.state.hex, false)} />\n\t\t\t\t\t<label htmlFor=\"height-selector\">Height:</label><input id=\"height-selector\" type=\"number\" min=\"5\" max=\"100\" value={this.state.height} onChange={({target:{value}}) => this.startNewGame(this.state.width, clamp(5, value, 100), this.state.mines, this.state.hex, false)} />\n\t\t\t\t\t<label htmlFor=\"mine-selector\">Mines:</label><input id=\"mine-selector\" type=\"number\" min=\"1\" max={this.state.width*this.state.height-1} value={this.state.mines} onChange={({target:{value}}) => this.startNewGame(this.state.width, this.state.height, clamp(1, value, this.state.width*this.state.height-1), this.state.hex, false)} />\n\t\t\t\t</div>\n\t\t\t\t<Header startTime={this.state.startTime} minesLeft={this.state.mines - this.state.field.flatMap(column => column.filter(tile => tile.flag === 1)).length} reset={()=>this.startNewGame(this.state.width, this.state.height, this.state.mines, this.state.hex, false)} />\n\t\t\t\t<div id=\"game\" className={classNames({\"hex\": this.state.hex})}>\n\t\t\t\t\t{this.state.field.map((column, i) => <div className=\"row\">\n\t\t\t\t\t\t{column.map((tile, j) => <Tile value={tile.value} hidden={tile.hidden} flag={tile.flag} gameEnded={this.state.gameEnded} onClick={()=>this.handleClick(j, i)} onContextMenu={e=>this.handleRightClick(e, j, i)} />)}\n\t\t\t\t\t</div>)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t)\n\t}\n}\n","import React from \"react\";\nimport \"./App.css\";\nimport MinesweeperHex from \"./Minesweeper\";\n\nfunction App() {\n  return (\n    <div>\n      <MinesweeperHex />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}